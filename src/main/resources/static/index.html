<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>测试页面</title>
</head>
<body style="background-color:#ddd;">
<button id="submit">点击测试</button><br />
<label id="rtn"></label>
<button id="submit2">点击测试222</button><br />
<label id="rtn2"></label>
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script>
  $(function(){
    console.log("opened");
  });

  $("#submit").click(function() {
    console.log("clicked");
    var url = "http://127.0.0.1:8080/request/call";
    var sql = "select * from dep,stuff where dep.name=stuff.depart;";
    var data = {msg: sql};
    $.ajax({
      type: "Post",
      url: url,
      data: data,
      contentType: "application/x-www-form-urlencoded;charset=utf8",
      headers: {'Access-Control-Allow-Headers': '*', "Access-Control-Allow-Origin": "*"},
      //headers:{'Content-Type':'application/json;charset=utf8'},
      dataType: "json",
      success: function (jdata) {
        // console.log("Status: " + status);
        console.log(jdata);
        $("#rtn").html("返回结果：" + JSON.stringify(jdata));
      },
      error: function (xhr, status) {
        console.log("Status: " + status);
        console.log(xhr);
        window.alert("请求数据失败");
      }
    });
  });
    $("#submit2").click(function() {
      console.log("clicked");
      var url = "http://127.0.0.1:8080/request/call";
      // var sql = "insert into dep(did,name,n_num) values(5,ec,4);";
      var sql="create table flights(id int *,name varchar,date varchar);";
      // sql="";
      // sql="insert into flights(id,name,date) values(1,SZ,2023-10-1);";
      sql="select * from flights";
      var data = {msg: sql};
      $.ajax({
        type: "Post",
        url: url,
        data: data,
        contentType: "application/x-www-form-urlencoded;charset=utf8",
        headers: {'Access-Control-Allow-Headers': '*', "Access-Control-Allow-Origin": "*"},
        //headers:{'Content-Type':'application/json;charset=utf8'},
        dataType: "json",
        success: function (jdata) {
          // console.log("Status: " + status);
          console.log(jdata);
          $("#rtn2").html("返回结果：" + JSON.stringify(jdata));
        },
        error: function (xhr, status) {
          console.log("Status: " + status);
          console.log(xhr);
          window.alert("请求数据失败");
        }
      });
    });
</script>
</body>
</html>